# Discord Bot Token
DISCORD_TOKEN=

# AI Backend Configuration
# Backend for text generation ('openai' or 'ollama')
TEXT_BACKEND=openai

# --- OpenAI/OpenRouter Configuration ---
OPENAI_API_KEY=
OPENAI_API_BASE=https://openrouter.ai/api/v1
OPENAI_TEXT_MODEL=qwen/qwen3-235b-a22b:free
VL_MODEL=qwen/qwen2.5-vl-72b-instruct:free

# --- Ollama Configuration ---
OLLAMA_BASE_URL=http://localhost:11434
TEXT_MODEL=qwen3-235b-a22b

# --- Screenshot API Configuration ---
# Get a key from https://screenshotmachine.com
SCREENSHOT_API_KEY=your_screenshot_api_key_here
SCREENSHOT_API_URL=https://api.screenshotmachine.com
SCREENSHOT_API_DEVICE=desktop
SCREENSHOT_API_DIMENSION=1024x768
SCREENSHOT_API_FORMAT=jpg
SCREENSHOT_API_DELAY=2000
SCREENSHOT_API_COOKIES=

# --- Bot Settings ---
TEMPERATURE=0.7
TIMEOUT=120.0
CHANGE_NICKNAME=True
MAX_CONVERSATION_LENGTH=50
MAX_USER_MEMORY=1000
MEMORY_SAVE_INTERVAL=30

# --- Context Management ---
CONTEXT_FILE_PATH=context.json
MAX_CONTEXT_MESSAGES=10
# Set to 'true' to disable all file-based context and run in a fully ephemeral mode
IN_MEMORY_CONTEXT_ONLY=false

# --- Prompt Files ---
# Optional: Set a custom path for the prompts file
PROMPT_FILE=prompts/prompt-pry-super-chill-v2.txt
VL_PROMPT_FILE=prompts/prompt-see-v1.txt

# --- Prometheus Metrics Configuration ---
# Enable Prometheus metrics collection and HTTP server
PROMETHEUS_ENABLED=true
# Port for Prometheus metrics HTTP server (set to 0 to auto-select available port)
PROMETHEUS_PORT=8000
# Enable HTTP server for metrics scraping (set to false for metrics without HTTP endpoint)
PROMETHEUS_HTTP_SERVER=true

# --- Online Search (DDG default, pluggable) ---
SEARCH_PROVIDER=ddg
SEARCH_MAX_RESULTS=5
SEARCH_SAFE=moderate
SEARCH_LOCALE=
DDG_API_ENDPOINT=https://duckduckgo.com/html/
# Set to true to force legacy HTML endpoint (bypasses ddgs client)
DDG_FORCE_HTML=true
# Optionally target the HTML mirror endpoint
# DDG_API_ENDPOINT=https://html.duckduckgo.com/html/
DDG_API_KEY=
DDG_TIMEOUT_MS=5000
CUSTOM_SEARCH_API_ENDPOINT=
CUSTOM_SEARCH_API_KEY=
CUSTOM_SEARCH_HEADERS=
CUSTOM_SEARCH_TIMEOUT_MS=8000
CUSTOM_SEARCH_RESULT_PATHS=
SEARCH_POOL_MAX_CONNECTIONS=10
SEARCH_BREAKER_FAILURE_WINDOW=5
SEARCH_BREAKER_OPEN_MS=15000
SEARCH_BREAKER_HALFOPEN_PROB=0.25
SEARCH_INLINE_MAX_CONCURRENCY=3

# --- Screenshot API (for !ss) ---
# Configure external screenshot provider
SCREENSHOT_API_KEY=
SCREENSHOT_API_URL=https://api.screenshotmachine.com
SCREENSHOT_API_DEVICE=desktop
SCREENSHOT_API_DIMENSION=1280x1024
SCREENSHOT_API_FORMAT=png
SCREENSHOT_API_DELAY=2000
# Optional: pass cookie string if provider/site requires consent/auth (use with care)
SCREENSHOT_API_COOKIES=

# Local fallback using Playwright (if API missing/fails)
SCREENSHOT_FALLBACK_PLAYWRIGHT=true
SCREENSHOT_PW_VIEWPORT=1280x1024
SCREENSHOT_PW_TIMEOUT_MS=15000
# Optional: override user agent for sites with UA gating
SCREENSHOT_PW_USER_AGENT=

# --- Twitter/X API (API-first) ---
# Feature flag: enable API-first integration for Twitter/X
X_API_ENABLED=false

# Auth mode and token (OAuth2 app-only bearer). NEVER commit real tokens.
X_API_AUTH_MODE=oauth2_app
X_API_BEARER_TOKEN=

# Fallback policy (scrape only on allowed conditions)
# If true, require API for Twitter and do NOT scrape on 401/403/404/410
X_API_REQUIRE_API_FOR_TWITTER=false
# Allow fallback on 5xx/timeouts only (respects Retry-After on 429)
X_API_ALLOW_FALLBACK_ON_5XX=true

# Syndication (bearerless) JSON tier for tweets
X_SYNDICATION_ENABLED=true

# Route tweet photos to vision-language analysis (VL)
X_API_ROUTE_PHOTOS_TO_VL=true

# Networking / resilience
X_API_TIMEOUT_MS=8000
X_API_RETRY_MAX_ATTEMPTS=5
X_API_BREAKER_FAILURE_WINDOW=5
X_API_BREAKER_OPEN_MS=15000
X_API_BREAKER_HALFOPEN_PROB=0.25

# Field hydration (comma-separated lists)
X_TWEET_FIELDS=id,text,created_at,author_id,public_metrics,possibly_sensitive,lang,attachments,entities,referenced_tweets,conversation_id
X_EXPANSIONS=author_id,attachments.media_keys,referenced_tweets.id,referenced_tweets.id.author_id
X_MEDIA_FIELDS=media_key,type,url,preview_image_url,variants,width,height,alt_text,public_metrics
X_USER_FIELDS=id,name,username,profile_image_url,verified,protected
X_POLL_FIELDS=id,options,duration_minutes,end_datetime,voting_status
X_PLACE_FIELDS=full_name,id,country_code,geo,name,place_type

# Routing default for Twitter
TWITTER_ROUTE_DEFAULT=api_first

# --- Streaming Status Cards ---
STREAMING_ENABLE=false
STREAMING_EMBED_STYLE=compact
STREAMING_TICK_MS=750
STREAMING_MAX_STEPS=8
